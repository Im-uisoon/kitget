import{r as S,o as b,a as c,c as a,b as h,d as n,_ as v,F as d,j as k,h as o,i as u,t as s}from"./index-BAdsKqPu.js";const w={class:"px-10 pt-5"},$={key:0,class:"text-gray-500 text-center py-8"},D={key:1},j={class:"flex justify-between"},C={class:"flex gap-1"},N=["onClick"],B={class:"pt-3"},F={class:"flex justify-between pt-3"},O={__name:"Order",setup(I){const l=S([]);b(async()=>{try{const t=await c.get("tender-hally-imuisoon-0eaa6cd0.koyeb.app/api/orders",{withCredentials:!0});l.value=t.data}catch(t){console.error("주문내역 불러오기 실패:",t)}});const p=t=>t==="card"?"카드":t==="money"?"현장결제":t,y=t=>t==="pickup"?"픽업":t==="delivery"?"택배":t;function f(t){const e=new Date(t),r=String(e.getFullYear()).slice(2),i=String(e.getMonth()+1).padStart(2,"0"),_=String(e.getDate()).padStart(2,"0"),m=String(e.getHours()).padStart(2,"0"),x=String(e.getMinutes()).padStart(2,"0");return`${r}.${i}.${_} ${m}:${x}`}async function g(t){if(confirm("정말 주문을 취소하시겠습니까?"))try{await c.delete(`tender-hally-imuisoon-0eaa6cd0.koyeb.app/api/orders/${t}`,{withCredentials:!0}),alert("주문이 취소되었습니다."),window.location.reload()}catch(e){alert("주문 취소에 실패했습니다."),console.error(e)}}return(t,e)=>(o(),a(d,null,[h(v),n("section",w,[e[3]||(e[3]=n("h1",{class:"text-xl font-bold pb-5"},"주문 내역",-1)),l.value.length===0?(o(),a("nav",$,e[0]||(e[0]=[n("p",null,"주문 내역이 없습니다",-1)]))):(o(),a("nav",D,[(o(!0),a(d,null,k(l.value,r=>(o(),a("div",{key:r.orderId,class:"ring-1 ring-blue-400 rounded-md p-2 mb-3"},[n("div",j,[n("div",C,[n("p",null,"주문번호 #"+s(r.orderId),1),n("p",null,s(p(r.payment)),1),e[1]||(e[1]=u(" · ")),n("p",null,s(y(r.shipping)),1)]),n("button",{onClick:i=>g(r.orderId),class:"select-none text-red-500 font-bold"},"X",8,N)]),n("ul",B,[n("li",null,s(r.itemNames.join(", ")),1)]),n("div",F,[n("p",null,s(f(r.orderDate)),1),n("p",null,[e[2]||(e[2]=u(" 총 금액 : ")),n("span",null,s(r.totalPrice.toLocaleString())+"원",1)])])]))),128))]))])],64))}};export{O as default};
