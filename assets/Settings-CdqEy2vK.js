import{r as t,k as P,c as o,b as $,d as e,_ as q,l as b,m as _,v as x,n as g,t as u,F as T,a as k,u as U,h as r}from"./index-C22vxa_n.js";const A={class:"mx-10 pt-10 md:flex md:flex-col md:justify-center md:items-center md:pt-50"},D={class:"flex gap-2 items-center pb-2 pt-3 md:pt-5"},F=["disabled"],j={class:"mb-3"},z={key:0,class:"text-green-600"},I={key:1,class:"text-red-600"},M={class:"md:flex md:flex-col md:gap-3"},R={class:"md:pt-3"},W=["disabled"],G=["disabled"],H={key:0,class:"text-green-600 mt-2"},J={key:1,class:"text-red-600 mt-2"},K={key:2,class:"text-green-600 mt-2"},L={key:3,class:"text-red-600 mt-2"},C="https://tender-hally-imuisoon-0eaa6cd0.koyeb.app/api",X={__name:"Settings",setup(O){const V=U(),w=t(!1),f=t(""),i=t(""),a=t(!1),S=async()=>{w.value=!0,f.value="";try{await k.post(`${C}/verify-password`,{password:i.value},{withCredentials:!0}),a.value=!0}catch{a.value=!1,f.value="비밀번호가 일치하지 않습니다"}finally{w.value=!1}},c=t(""),v=t(""),l=t(""),d=t(""),E=P(()=>a.value&&l.value.length>0&&d.value.length>0&&l.value===d.value),B=async()=>{c.value="",v.value="";try{await k.post(`${C}/change-password`,{newPassword:l.value},{withCredentials:!0}),v.value="비밀번호가 성공적으로 변경되었습니다",i.value="",l.value="",d.value="",a.value=!1,setTimeout(()=>{V.replace("/about")},1500)}catch{c.value="비밀번호 변경에 실패했습니다"}},p=t(""),m=t(""),h=P(()=>a.value),N=async()=>{if(p.value="",m.value="",!!h.value&&confirm("정말로 탈퇴하시겠습니까? 모든 주문 내역이 삭제됩니다"))try{await k.post(`${C}/withdraw`,{},{withCredentials:!0}),m.value="회원 탈퇴가 완료되었습니다",setTimeout(()=>{V.replace("/")},1500)}catch{p.value="회원 탈퇴에 실패했습니다"}};return(y,s)=>(r(),o(T,null,[$(q),e("section",A,[e("nav",null,[s[3]||(s[3]=e("h1",{class:"text-lg md:text-2xl"},"회원 설정",-1)),e("div",D,[_(e("input",{"onUpdate:modelValue":s[0]||(s[0]=n=>i.value=n),required:"",type:"password",placeholder:"비밀번호를 입력하세요",class:"p-2 md:p-3 border rounded focus:outline-none focus:border-blue-500"},null,512),[[x,i.value]]),e("button",{class:g(["p-2 md:p-3 ml-2 border rounded focus:outline-none",a.value?"bg-green-500 text-white border-green-700":"bg-white border-blue-500 text-blue-700"]),onClick:S,disabled:w.value},"인증",10,F)]),e("div",j,[a.value?(r(),o("span",z,"인증 성공")):(r(),o("span",I,u(f.value),1))]),e("div",M,[_(e("input",{"onUpdate:modelValue":s[1]||(s[1]=n=>l.value=n),required:"",type:"password",placeholder:"새 비밀번호",class:"p-2 md:p-3 border rounded focus:outline-none focus:border-blue-500 mb-2"},null,512),[[x,l.value]]),_(e("input",{"onUpdate:modelValue":s[2]||(s[2]=n=>d.value=n),required:"",type:"password",placeholder:"새 비밀번호 재입력",class:"p-2 md:p-3 border rounded focus:outline-none focus:border-blue-500 mb-3"},null,512),[[x,d.value]])]),e("div",R,[e("button",{disabled:!E.value,onClick:B,class:g(["px-5 py-2 md:py-3 md:px-7 rounded mr-2 font-bold transition-colors duration-200",E.value?"bg-blue-400 text-white cursor-pointer hover:bg-blue-500 border-1 border-black":"bg-gray-300 text-gray-500 cursor-not-allowed"])},"저장",10,W),e("button",{disabled:!h.value,onClick:N,class:g(["px-5 py-2 md:py-3 md:px-7 rounded font-bold transition-colors duration-200 ml-1",h.value?"bg-red-400 text-white cursor-pointer hover:bg-red-500 border-1 border-black":"bg-gray-300 text-gray-500 cursor-not-allowed"])},"탈퇴",10,G)]),v.value?(r(),o("div",H,u(v.value),1)):b("",!0),c.value?(r(),o("div",J,u(c.value),1)):b("",!0),m.value?(r(),o("div",K,u(m.value),1)):b("",!0),p.value?(r(),o("div",L,u(p.value),1)):b("",!0)])])],64))}};export{X as default};
