import{r,k,o as C,c as o,b as $,d as a,_ as N,l as M,F as x,j as v,a as y,u as j,h as n,t as c,n as A}from"./index-DuEqZUCI.js";const B={class:"pt-10 md:pt-20 mx-10 md:mx-25"},D={class:"flex justify-between items-center mb-6"},P={class:"divide-y divide-gray-200"},S=["onClick"],V={class:"font-semibold text-lg xl:text-xl text-gray-900"},E={class:"text-sm text-gray-500 xl:text-lg xl:pt-2"},F={class:"text-xs text-gray-400 xl:text-lg"},L={class:"flex justify-center mt-6 gap-2 xl:gap-5"},T=["onClick"],q={__name:"Notice",setup(z){j();const h=r([]),i=r(0),g=r(1),u=r(null),m=r(null),_=async()=>{try{const e=await y.get("http://localhost:8080/api/me",{withCredentials:!0});u.value=e.data.auth,m.value=e.data.email}catch{u.value=null,m.value=null}},p=async()=>{const e=await y.get(`http://localhost:8080/api/notice?page=${i.value}`,{withCredentials:!0});h.value=e.data.content,g.value=e.data.totalPages},b=e=>{i.value=e,p()},f=k(()=>{const e=g.value,l=i.value,t=5;let s=Math.max(0,l-2),d=Math.min(e,s+t);return d-s<t&&(s=Math.max(0,d-t)),Array.from({length:d-s},(I,w)=>s+w)});return C(async()=>{await _(),await p()}),(e,l)=>(n(),o(x,null,[$(N),a("section",B,[a("div",null,[a("div",D,[l[1]||(l[1]=a("h1",{class:"text-2xl font-bold text-gray-800 xl:text-3xl"},"공지사항",-1)),u.value==="teacher"?(n(),o("button",{key:0,onClick:l[0]||(l[0]=t=>e.$router.push("/notice/write")),class:"bg-blue-500 text-white px-4 py-2 xl:px-6 xl:py-4 rounded hover:bg-blue-600 transition"},"글쓰기")):M("",!0)]),a("ul",P,[(n(!0),o(x,null,v(h.value,t=>(n(),o("li",{key:t.id,class:"py-2 xl:py-15 flex justify-between items-center hover:bg-blue-50 transition rounded cursor-pointer",onClick:s=>e.$router.push(`/notice/${t.id}`)},[a("div",null,[a("div",V,c(t.title),1),a("div",E,"작성자: "+c(t.writerName),1)]),a("div",F,c(new Date(t.createdAt).toLocaleDateString()),1)],8,S))),128))]),a("div",L,[(n(!0),o(x,null,v(f.value,t=>(n(),o("button",{key:t,onClick:s=>b(t),class:A(["px-3 py-1 xl:px-5 xl:py-3 rounded",i.value===t?"bg-blue-600 text-white font-bold":"bg-gray-200 text-gray-600 hover:bg-blue-100"])},c(t+1),11,T))),128))])])])],64))}};export{q as default};
